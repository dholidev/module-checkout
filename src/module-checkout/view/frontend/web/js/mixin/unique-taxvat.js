define(["jquery","uiRegistry","Dholi_Checkout/js/action/check-taxvat-availability","Magento_Checkout/js/model/full-screen-loader","mage/translate"],function(e,a,d,c){let isTaxvatCheckComplete=null;let checkTaxvatExists=null;let taxvatCheckTimeout=0;let checkDelay=2000;var b=function(f){isTaxvatCheckComplete=e.Deferred();checkTaxvatExists=d(isTaxvatCheckComplete,f.val());e.when(isTaxvatCheckComplete).done(function(){f.removeClass("unique-taxvat-error").next(".unique-taxvat-error").remove();e("button[data-role=opc-continue]").prop("disabled",false)}.bind(this)).fail(function(){if(f.next(".unique-taxvat-error").length==0){f.addClass("unique-taxvat-error").after('<div class="field-error unique-taxvat-error" data-bind="attr: { id: element.errorId }" generated="true" id="unique-taxvat-error"><span data-bind="text: element.error">'+e.mage.__("Taxvat already registered")+"</span></div>");e("button[data-role=opc-continue]").prop("disabled",true)}}.bind(this)).always(function(){c.stopLoader()}.bind(this))};return function(f){a.async("checkoutProvider")(function(g){g.on("shippingAddress",function(h){try{e('div[name$=".taxvat"] input[type="text"]').each(function(j){if(!e(this).data("unique-taxvat")){e(this).data("unique-taxvat",true);if(e(this).metadata().validate){e(this).metadata().validate["validate-unique-taxvat"]=true}else{e(this).metadata().validate={"validate-unique-taxvat":true}}e(this).blur(function(){c.startLoader();let self=e(this);clearTimeout(taxvatCheckTimeout);taxvatCheckTimeout=setTimeout(function(){b(self)},checkDelay)})}})}catch(i){(console.error||console.log).call(console,i.message||i)}})});return f}});