define(["jquery","uiComponent","Dholi_Checkout/js/action/check-taxvat-availability","Magento_Checkout/js/model/full-screen-loader","mage/translate"],function(a,f,g,d){var c=null,e=0,h=function(b){c=a.Deferred();g(c,b.val());a.when(c).done(function(){b.removeClass("unique-taxvat-error").next(".unique-taxvat-error").remove();jQuery("form.account.form-create-account button.action.primary").prop("disabled",!1)}.bind(this)).fail(function(){0==b.next(".unique-taxvat-error").length&&(b.addClass("unique-taxvat-error").after('<div class="field-error unique-taxvat-error" data-bind="attr: { id: element.errorId }" generated="true" id="unique-taxvat-error"><span data-bind="text: element.error">'+
a.mage.__("Taxvat already registered")+"</span></div>"),a("form.account.form-create-account button.action.primary").prop("disabled",!0))}.bind(this)).always(function(){d.stopLoader()}.bind(this))};return f.extend({defaults:{},initialize:function(){this._super();a("#taxvat").each(function(b){a(this).data("unique-taxvat")||(a(this).data("unique-taxvat",!0).metadata().validate["validate-unique-taxvat"]=!0,a(this).blur(function(){d.startLoader();var k=a(this);clearTimeout(e);e=setTimeout(function(){h(k)},
2E3)}))})}})});
