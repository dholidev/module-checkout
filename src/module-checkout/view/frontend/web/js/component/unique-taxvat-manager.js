define(["jquery","uiComponent","Dholi_Checkout/js/action/check-taxvat-availability","Magento_Checkout/js/model/full-screen-loader","mage/translate"],function(e,d,c,b){let isTaxvatCheckComplete=null;let checkTaxvatExists=null;let taxvatCheckTimeout=0;let checkDelay=2000;var a=function(f){isTaxvatCheckComplete=e.Deferred();checkTaxvatExists=c(isTaxvatCheckComplete,f.val());e.when(isTaxvatCheckComplete).done(function(){f.removeClass("unique-taxvat-error").next(".unique-taxvat-error").remove();jQuery("form.account.form-create-account button.action.primary").prop("disabled",false)}.bind(this)).fail(function(){if(f.next(".unique-taxvat-error").length==0){f.addClass("unique-taxvat-error").after('<div class="field-error unique-taxvat-error" data-bind="attr: { id: element.errorId }" generated="true" id="unique-taxvat-error"><span data-bind="text: element.error">'+e.mage.__("Taxvat already registered")+"</span></div>");e("form.account.form-create-account button.action.primary").prop("disabled",true)}}.bind(this)).always(function(){b.stopLoader()}.bind(this))};return d.extend({defaults:{},initialize:function(){this._super();e("#taxvat").each(function(f){if(!e(this).data("unique-taxvat")){e(this).data("unique-taxvat",true).metadata().validate["validate-unique-taxvat"]=true;e(this).blur(function(){b.startLoader();let self=e(this);clearTimeout(taxvatCheckTimeout);taxvatCheckTimeout=setTimeout(function(){a(self)},checkDelay)})}})}})});